jellyfin:
  enabled: true
  replicaCount: 2
  deploymentAnnotations:
    reloader.stakater.com/auto: "true"
  ingress:
    enabled: true
    className: traefik
    hosts:
      - host: myflix.home.rushidarunte.com
        paths:
          - path: /
            pathType: Prefix
            backend:
              service:
                name: jellyfin
                port:
                  number: 8096 
  storage:
    configPersistentVolumeClaim:
      createPersistentVolumeClaim: false
    # Volume Configuration
    volumeMounts:
      - name: media
        mountPath: /config
        subPath: jellyfin/config
      - name: cache
        mountPath: /cache
      - name: media
        mountPath: /media
        readOnly: false

    volumes:
      - name: cache
        emptyDir:
          medium: Memory
          sizeLimit: 4Gi
      - name: media
        persistentVolumeClaim:
          claimName: jellyfin-media-nfs-pvc
  pdb:
    enabled: true
    minAvailable: 1  # Protects during graceful operations
  # Tolerate the alpha taint so it CAN run there
  tolerations:
    - key: "proxmox-node"
      operator: "Equal"
      value: "alpha"
      effect: "NoSchedule"
  # PREFER alpha nodes, but allow others
  affinity:
    nodeAffinity:
      preferredDuringSchedulingIgnoredDuringExecution:
        - weight: 100  # High priority for alpha nodes
          preference:
            matchExpressions:
              - key: proxmox-node
                operator: In
                values:
                  - alpha

jellyseerr:
  enabled: true
  replicaCount: 1
  deploymentAnnotations:
    reloader.stakater.com/auto: "true"
  ingress:
    enabled: true
    className: traefik
    hosts:
      - host: jellyseerr.home.rushidarunte.com
        paths:
          - path: /
            pathType: Prefix
            backend:
              service:
                name: jellyseerr
                port:
                  number: 5055 
  storage:
    configPersistentVolumeClaim:
      createPersistentVolumeClaim: false
    # Volume Configuration
    volumeMounts:
      - name: media
        mountPath: /app/config
        subPath: jellyseerr-config 

    volumes:
      - name: media
        persistentVolumeClaim:
          claimName: jellyfin-media-nfs-pvc

radarr:
  enabled: true
  replicaCount: 1
  deploymentAnnotations:
    reloader.stakater.com/auto: "true"
  config:
    data:
      TZ: "Asia/Kolkata"
      RADARR__SERVER__URLBASE: /radarr
  envFrom:
    - configMapRef:
        name: radarr-config
  ingress:
    enabled: true
    className: traefik
    hosts:
      - host: myflix.home.rushidarunte.com
        paths:
          - path: /radarr
            pathType: Prefix
            backend:
              service:
                name: jellyseerr
                port:
                  number: 7878 
  storage:
    configPersistentVolumeClaim:
      createPersistentVolumeClaim: false
    # Volume Configuration
    volumeMounts:
      - name: media
        mountPath: /config
        subPath: radarr-config
      - name: media
        mountPath: /downloads
        subPath: qbittorrent/downloads
        readOnly: false
      - name: media
        mountPath: /data/movies
        subPath: movies
        readOnly: false

    volumes:
      - name: media
        persistentVolumeClaim:
          claimName: jellyfin-media-nfs-pvc
  
sonarr:
  enabled: true
  replicaCount: 1
  deploymentAnnotations:
    reloader.stakater.com/auto: "true"
  config:
    data:
      TZ: "Asia/Kolkata"
      SONARR__SERVER__URLBASE: /sonarr
  envFrom:
    - configMapRef:
        name: sonarr-config
  ingress:
    enabled: true
    className: traefik
    hosts:
      - host: myflix.home.rushidarunte.com
        paths:
          - path: /sonarr
            pathType: Prefix
            backend:
              service:
                name: sonarr
                port:
                  number: 8989
  storage:
    configPersistentVolumeClaim:
      createPersistentVolumeClaim: false
    # Volume Configuration
    volumeMounts:
      - name: media
        mountPath: /config
        subPath: sonarr-config
      - name: media
        mountPath: /downloads
        subPath: qbittorrent/downloads
        readOnly: false
      - name: media
        mountPath: /data
        subPath: tvshows
        readOnly: false

    volumes:
      - name: media
        persistentVolumeClaim:
          claimName: jellyfin-media-nfs-pvc

prowlarr:
  enabled: true
  replicaCount: 1
  deploymentAnnotations:
    reloader.stakater.com/auto: "true"
  config:
    data:
      TZ: "Asia/Kolkata"
      PROWLARR__SERVER__URLBASE: /prowlarr
  envFrom:
    - configMapRef:
        name: prowlarr-config
  ingress:
    enabled: true
    className: traefik
    hosts:
      - host: myflix.home.rushidarunte.com
        paths:
          - path: /prowlarr
            pathType: Prefix
            backend:
              service:
                name: prowlarr
                port:
                  number: 9696

  storage:
    configPersistentVolumeClaim:
      createPersistentVolumeClaim: false
    # Volume Configuration
    volumeMounts:
      - name: media
        mountPath: /config
        subPath: prowlarr-config

    volumes:
      - name: media
        persistentVolumeClaim:
          claimName: jellyfin-media-nfs-pvc

jackett:
  enabled: true
  replicaCount: 1
  deploymentAnnotations:
    reloader.stakater.com/auto: "true"
  ingress:
    enabled: true
    className: traefik
    hosts:
      - host: myflix.home.rushidarunte.com
        paths:
          - path: /jackett
            pathType: Prefix
            backend:
              service:
                name: jackett
                port:
                  number: 9117 
  storage:
    configPersistentVolumeClaim:
      createPersistentVolumeClaim: false
    # Volume Configuration
    volumeMounts:
      - name: media
        mountPath: /config
        subPath: jackett-config

    volumes:
      - name: media
        persistentVolumeClaim:
          claimName: jellyfin-media-nfs-pvc

qbittorrent:
  enabled: true
  replicaCount: 1
  deploymentAnnotations:
    reloader.stakater.com/auto: "true"
  config:
    data:
      TZ: "Asia/Kolkata"
      WEBUI_PORT: "8080"
      TORRENTING_PORT: "6881"
  envFrom:
    - configMapRef:
        name: qbittorrent-config
  ingress:
    enabled: true
    className: traefik
    hosts:
      - host: qbit.home.rushidarunte.com
        paths:
          - path: /
            pathType: Prefix
            backend:
              service:
                name: qbittorrent
                port:
                  number: 8080 
  storage:
    configPersistentVolumeClaim:
      createPersistentVolumeClaim: false
    # Volume Configuration
    volumeMounts:
      - name: media
        mountPath: /config
        subPath: qbittorrent/config
      - name: media
        mountPath: /downloads
        subPath: qbittorrent/downloads
        readOnly: false

    volumes:
      - name: media
        persistentVolumeClaim:
          claimName: jellyfin-media-nfs-pvc